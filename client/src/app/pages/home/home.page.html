<ion-content class="ion-padding">

  <section class="hero">
      <h1>üîí Partagez vos secrets en toute s√©curit√©</h1>
      <p>
        Envoyez un <b>lien unique</b> consultable une seule fois. Le secret est
        <b>supprim√© d√©finitivement</b> apr√®s lecture.
      </p>
    <div class="cta">
      <ion-button color="primary" [routerLink]="user ? '/dashboard' : '/auth'">
        {{ user ? 'Acc√©der √† mon espace' : 'Se connecter / Cr√©er un compte' }}
      </ion-button>
      <ion-button fill="outline" href="https://github.com/nicolegrimpeur/SecretLink/wiki" target="_blank">
        Documentation
      </ion-button>
    </div>
  </section>

  <section class="steps">
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="5" offset-md="3.5">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Cr√©er un lien s√©curis√©</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <form [formGroup]="form" (ngSubmit)="createSecret()">
                <ion-item lines="none">
                  <ion-input
                    label="Secret :"
                    formControlName="secret"
                    [required]="true"
                    errorText="Ce champ est requis."
                    [counter]="true"
                    [maxlength]="64"
                    placeholder="Collez un mot de passe, un code, un token‚Ä¶"
                  />
                </ion-item>

                <div class="ion-display-flex ion-justify-content-center">
                  <ion-button type="submit" [disabled]="form.invalid || loading">Cr√©er le lien</ion-button>
                </div>
              </form>

              @if (creationResult) {
                <ion-list>
                  <ion-item>
                    <ion-label>
                      {{ statusHelp[creationResult.status] }}

                      <br>

                      @if (creationResult.link_token) {
                        <a [href]="linkUrl(creationResult.link_token)" target="_blank">{{ linkUrl(creationResult.link_token) }}</a>
                      }

                      @if (creationResult.expires_at) {
                        <div>Expire : {{ creationResult.expires_at | date:'medium' }}</div>
                      }
                    </ion-label>
                    @if (creationResult.link_token) {
                      <ion-button size="default" fill="clear" (click)="copy(linkUrl(creationResult.link_token))" slot="end">Copier</ion-button>
                    }
                  </ion-item>
                </ion-list>
              }

            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </section>

  <section id="how-it-works">
    <h2>Comment √ßa marche ?</h2>
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="3" offset-md="1.5">
          <ion-card>
            <ion-card-header>
              <ion-card-title>
                <ion-icon name="lock-closed-outline"></ion-icon>
                1. Saisissez votre secret
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              Mot de passe, cl√© API, token‚Ä¶
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12" size-md="3">
          <ion-card>
            <ion-card-header>
              <ion-card-title>
                <ion-icon name="link-outline"></ion-icon>
                2. G√©n√©rez un lien unique
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              Le lien est √† usage unique et s‚Äôautod√©truit apr√®s lecture ou √† expiration.
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12" size-md="3">
          <ion-card>
            <ion-card-header>
              <ion-card-title>
                <ion-icon name="share-social-outline"></ion-icon>
                3. Partagez le lien
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              Envoyez simplement le lien au destinataire : aucune inscription requise
              pour consulter le secret.
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </section>

  <section id="features">
    <h2>Pourquoi SecretLink ?</h2>
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="3" offset-md="1.5">
          <ion-card>
            <ion-card-header>
              <ion-card-title>
                <ion-icon name="bulb-outline"></ion-icon>
                Intuitive
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              Une interface simple, claire et intuitive.
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12" size-md="3">
          <ion-card>
            <ion-card-header>
              <ion-card-title>
                <ion-icon name="lock-closed-outline"></ion-icon>
                S√©curit√©
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              Les secrets sont chiffr√©s en transit et au repos, et supprim√©s d√®s leur lecture ou expiration.
            </ion-card-content>
          </ion-card>
        </ion-col>
        <ion-col size="12" size-md="3">
          <ion-card>
            <ion-card-header>
              <ion-card-title>
                <ion-icon name="cloud-outline"></ion-icon>
                API & automatisation
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              Automatisez vos partages de secrets gr√¢ce aux tokens personnels et √† l‚ÄôAPI REST. Collection Postman
              <a href="https://github.com/nicolegrimpeur/SecretLink/blob/master/api/SecretLink%20API.json" target="_blank">disponible</a>.
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </section>

  <section>
    <h2>Pourquoi cr√©er un compte ?</h2>
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="8" offset-md="2">
          <ion-card>
            <ion-card-content>
              <div class="cmp-grid" role="table" aria-label="Comparatif Anonyme versus Compte">
                <!-- Header row -->
                <div class="cmp-row cmp-head" role="row">
                  <div class="cmp-cell cmp-col-feature" role="columnheader">√âl√©ment</div>
                  <div class="cmp-cell cmp-col-plan" role="columnheader">Anonyme</div>
                  <div class="cmp-cell cmp-col-plan" role="columnheader">Compte</div>
                </div>

                <!-- Longueur du secret -->
                <div class="cmp-row" role="row">
                  <div class="cmp-cell cmp-col-feature" role="rowheader">Longueur du secret</div>
                  <div class="cmp-cell" role="cell">
                    <ion-badge color="medium">64 caract√®res</ion-badge>
                  </div>
                  <div class="cmp-cell" role="cell">
                    <ion-badge color="primary">4096 caract√®res</ion-badge>
                  </div>
                </div>

                <!-- Dur√©e de vie du lien -->
                <div class="cmp-row" role="row">
                  <div class="cmp-cell cmp-col-feature" role="rowheader">Dur√©e de vie du lien</div>
                  <div class="cmp-cell" role="cell">
                    <ion-badge color="medium">7 jours</ion-badge>
                  </div>
                  <div class="cmp-cell" role="cell">
                    <ion-badge color="tertiary">Valeur personnalis√©e</ion-badge>
                  </div>
                </div>

                <!-- Chiffrement bout en bout -->
                <div class="cmp-row" role="row">
                  <div class="cmp-cell cmp-col-feature" role="rowheader">Chiffrement bout en bout</div>
                  <div class="cmp-cell" role="cell" aria-label="Anonyme: Non">
                    <ion-icon name="close-circle-outline" class="x"></ion-icon>
                  </div>
                  <div class="cmp-cell cmp-note" role="cell" aria-label="Compte: Oui via passphrase">
                    <ion-icon name="checkmark-circle-outline" class="v"></ion-icon>
                    <span class="note">via passphrase</span>
                  </div>
                </div>

                <!-- Cr√©ation de liens en bulk -->
                <div class="cmp-row" role="row">
                  <div class="cmp-cell cmp-col-feature" role="rowheader">Cr√©ation de liens en bulk</div>
                  <div class="cmp-cell" role="cell" aria-label="Anonyme: Non">
                    <ion-icon name="close-circle-outline" class="x"></ion-icon>
                  </div>
                  <div class="cmp-cell" role="cell" aria-label="Compte: Oui">
                    <ion-icon name="checkmark-circle-outline" class="v"></ion-icon>
                  </div>
                </div>

                <!-- Suivi du statut de vos liens -->
                <div class="cmp-row" role="row">
                  <div class="cmp-cell cmp-col-feature" role="rowheader">Suivi du statut de vos liens</div>
                  <div class="cmp-cell" role="cell" aria-label="Anonyme: Non">
                    <ion-icon name="close-circle-outline" class="x"></ion-icon>
                  </div>
                  <div class="cmp-cell" role="cell" aria-label="Compte: Oui">
                    <ion-icon name="checkmark-circle-outline" class="v"></ion-icon>
                  </div>
                </div>
              </div>
            </ion-card-content>
            <!-- Petite l√©gende -->
            <ion-card-content class="cmp-legend">
                <span class="ion-display-flex ion-align-items-center"><ion-icon name="checkmark-circle-outline" class="v"></ion-icon> Inclus</span>
                <span class="ion-display-flex ion-align-items-center"><ion-icon name="close-circle-outline" class="x"></ion-icon> Non inclus</span>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </section>


  <section class="cta-bottom">
    <h2>Pr√™t √† simplifier le partage de vos secrets ?</h2>
    <ion-button size="large" color="primary" [routerLink]="user ? '/dashboard' : '/auth'">
      {{ user ? 'Acc√©der √† mon espace' : 'Cr√©er un compte gratuit' }}
    </ion-button>
  </section>

  <section id="faq">
    <h2>Foire aux questions</h2>
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="4" offset-md="4">
          <ion-accordion-group expand="inset" [multiple]="true" class="ion-no-margin">
            <ion-accordion value="q1">
              <ion-item slot="header">
                <ion-label>Qu‚Äôest-ce que SecretLink ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                SecretLink est un service permettant de partager en toute s√©curit√© un mot de passe, une cl√© API ou toute donn√©e sensible
                via un <b>lien √† usage unique</b>. D√®s que le lien est consult√©, le secret est supprim√© d√©finitivement du serveur.
              </div>
            </ion-accordion>

            <ion-accordion value="q2">
              <ion-item slot="header">
                <ion-label>Est-ce que SecretLink conserve mes mots de passe ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Non. Les secrets sont <b>chiffr√©s avant stockage</b> et automatiquement supprim√©s d√®s leur premi√®re lecture
                ou √† expiration. Aucun mot de passe n‚Äôest enregistr√© en clair.
              </div>
            </ion-accordion>

            <ion-accordion value="q3">
              <ion-item slot="header">
                <ion-label>Comment fonctionne la lecture d‚Äôun lien ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Le destinataire clique sur le lien unique, affiche le secret une seule fois, puis celui-ci est imm√©diatement supprim√©.
                Si le lien est rouvert ensuite, il renverra un message d‚Äôexpiration ou d‚Äôutilisation.
              </div>
            </ion-accordion>

            <ion-accordion value="q4">
              <ion-item slot="header">
                <ion-label>Puis-je utiliser SecretLink sans compte ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Oui, il est possible de cr√©er des liens anonymes sans s‚Äôinscrire.
                Cependant, certaines fonctionnalit√©s avanc√©es (dur√©e personnalis√©e, secrets plus longs, gestion des secrets)
                n√©cessitent un compte.
              </div>
            </ion-accordion>

            <ion-accordion value="q5">
              <ion-item slot="header">
                <ion-label>Puis-je supprimer mon compte ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Oui, √† tout moment depuis votre espace personnel.
                La suppression entra√Æne √©galement la suppression de <b>tous vos liens et tokens API</b>.
              </div>
            </ion-accordion>

            <ion-accordion value="q6">
              <ion-item slot="header">
                <ion-label>Les secrets sont-ils chiffr√©s ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Oui, tous les secrets sont chiffr√©s c√¥t√© serveur avant d‚Äô√™tre stock√©s.
                Pour les comptes, l'utilisation de passphrase permet le chiffrement <b>de bout en bout</b> : le secret est alors chiffr√© c√¥t√© client avant envoi.
              </div>
            </ion-accordion>

            <ion-accordion value="q7">
              <ion-item slot="header">
                <ion-label>Que se passe-t-il si le lien expire ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Une fois expir√©, le secret est supprim√© d√©finitivement.
                Il reste uniquement une trace minimale (horodatage et statut) pour audit,
                mais le contenu du secret est irr√©cup√©rable.
              </div>
            </ion-accordion>

            <ion-accordion value="q8">
              <ion-item slot="header">
                <ion-label>Puis-je automatiser la cr√©ation de liens ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Oui ! En utilisant l‚Äô<b>API REST</b> de SecretLink.
                Cr√©ez un <b>token personnel (PAT)</b> depuis votre compte, puis utilisez-le dans vos scripts ou outils (ex. CI/CD)
                pour g√©n√©rer automatiquement des liens √† usage unique.
              </div>
            </ion-accordion>

            <ion-accordion value="q9">
              <ion-item slot="header">
                <ion-label>Comment utiliser la collection Postman ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Une collection Postman officielle est disponible sur le
                <a href="https://github.com/nicolegrimpeur/SecretLink/blob/master/api/SecretLink%20API.json" target="_blank">
                  GitHub du projet
                </a>.
                Elle contient tous les endpoints avec exemples de requ√™tes pour tester ou int√©grer facilement l‚ÄôAPI.
                De plus, la documentation compl√®te de l‚ÄôAPI est disponible
                <a href="https://github.com/nicolegrimpeur/SecretLink/wiki/api" target="_blank">
                  ici
                </a>.
              </div>
            </ion-accordion>

            <ion-accordion value="q10">
              <ion-item slot="header">
                <ion-label>Puis-je supprimer un lien avant son expiration ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Si vous poss√©dez un compte oui, vous pouvez r√©voquer un lien depuis le tableau de bord ou via l‚ÄôAPI.
                Le secret est imm√©diatement supprim√© de la base de donn√©es, et le lien devient invalide.
              </div>
            </ion-accordion>

            <ion-accordion value="q11">
              <ion-item slot="header">
                <ion-label>Puis-je r√©utiliser le m√™me identifiant (ex. email) sur mon compte ?</ion-label>
              </ion-item>
              <div class="ion-padding" slot="content">
                Oui, d√®s que le lien pr√©c√©dent associ√© √† cet identifiant est <b>supprim√©, utilis√© ou expir√©</b>,
                vous pouvez en cr√©er un nouveau avec le m√™me.
              </div>
            </ion-accordion>
          </ion-accordion-group>
        </ion-col>
      </ion-row>
    </ion-grid>
  </section>

  <footer>
    <p>¬© 2025 SecretLink ({{ version }}) - Nicolas Barrat</p>
    <p class="links">
      <a href="https://github.com/nicolegrimpeur/SecretLink" target="_blank">GitHub</a> ¬∑
      <a href="https://github.com/nicolegrimpeur/SecretLink/wiki" target="_blank">Documentation</a> ¬∑
      <a routerLink="/privacy">Confidentialit√©</a> ¬∑
      <a routerLink="/legal">Mentions l√©gales</a>
    </p>
  </footer>

</ion-content>
