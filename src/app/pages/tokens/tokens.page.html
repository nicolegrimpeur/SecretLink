<ion-content [fullscreen]="true">
  <ion-button (click)="create()">Créer un token</ion-button>

  @if (justCreatedToken) {
    <ion-card>
      <ion-card-header><ion-card-title>Nouveau token</ion-card-title></ion-card-header>
      <ion-card-content>
        <ion-text color="warning">Copiez-le maintenant, il ne sera plus affiché :</ion-text>
        <pre>{{ justCreatedToken }}</pre>
      </ion-card-content>
    </ion-card>
  }


  <ion-list>
    @for (t of list; track t) {
      <ion-item>
        <ion-label>
          <h2>{{ t?.label || '—' }}</h2>
          <p>Scopes: {{ t?.scopes?.join(', ') }}</p>
          <p>Créé: {{ t?.created_at }} — Révoqué: {{ t?.revoked_at || 'non' }}</p>
        </ion-label>
        <ion-button color="danger" (click)="revoke(t?.id)" [disabled]="!!t?.revoked_at">Révoquer</ion-button>
      </ion-item>
    }

  </ion-list>
</ion-content>
